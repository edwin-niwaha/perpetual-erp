{% extends 'admin/adminbase.html' %}

{% load static %}


{% block block_js %}
<script>

</script>
{% endblock %}


{% block css_block %}
<style>

</style>

{% endblock %}

{% block body_block %}

<div class="container">
    <h1 class="text-center text-primary">Customer Loan Requests</h1>
    <hr>
    <div class="users my-5">
        <table class="table table-light table-hover table-bordered table-striped text-left">
            <thead class="bg-dark ">
                <tr class="text-dark ">
                    <th scope="col">#</th>
                    <th scope="col">Loan ID</th>
                    <th scope="col">User ID</th>
                    <th scope="col">Customer</th>
                    <th scope="col">Category</th>
                    <th scope="col">Amount (UgX)</th>
                    <th scope="col">Request Date</th>
                    <th scope="col">Tenure(yrs)</th>
                    <th scope="col">Rate</th>
                    <!-- <th scope="col">Email</th> -->
                    <th scope="col">Status</th>
                    <th colspan="5">Action</th>

                </tr>
            </thead>
            <tbody>
                {% for loan in loanrequest %}

                <tr>
                    <th scope="row">{{forloop.counter}}</th>
                    <td>{{loan.id}}</td>
                    <td>{{loan.customer.id}}</td>
                    <td>{{loan.customer}}</td>
                    <!-- <td> <img src="/media/{{user.profile_picture}}" alt="Profile Pic" height="40px" width="40px" />
                    </td> -->
                    <td>{{loan.category}}</td>
                    <td style="text-align: right;">{{loan.amount}}</td>
                    <td>{{loan.request_date}}</td>
                    <td>{{loan.year}}</td>
                    <td>{{loan.annual_interest_rate}}%</td>
                    <!-- <td>{{loan.customer.user.email}}</td> -->
                    <td>
                        <button type="button" class="btn btn-info text-white btn-sm px-2">
                            {{loan.status}}
                        </button>
                    </td>
                    <td>
                        <a title="Approve" href="{% url 'managerApp:approved_request' loan.id  %}"
                            onclick="return confirm('Are you sure you want to approve this loan?');">
                            <i class="bi bi-patch-check-fill"></i>
                        </a>
                    </td>
                    <td>
                        </a>
                        <a title="Reject" href="{% url 'managerApp:rejected_request' loan.id  %}"
                            onclick="return confirm('Are you sure you want to reject this loan?');">
                            <button title="Decline" type="button" id="btn-confirm" class="btn btn-danger btn-sm px-1">
                                <i class="bi bi-x-octagon-fill"></i>
                            </button>
                        </a>
                    </td>
                    <td><a title="Generate Schedule" href="{% url 'managerApp:loan_schedule' loan.id %}"
                            onclick="return confirm('Are you sure you want to generate schedule?');"><i
                                class="bi bi-calendar-plus-fill"></i></a>
                    </td>
                    <td><a href="{% url 'managerApp:update_loan' loan.id %}"
                            onclick="return confirm('Are you sure you want update?');">
                            <button title="Update" type="button" id="btn-confirm" class="btn btn-success btn-sm px-1">
                                <i class="bi bi-pencil"></i>
                            </button>
                        </a>
                    </td>
                    <td><a href="{% url 'managerApp:delete_loan' loan.id %}"
                            onclick="return confirm('Are you sure you want to delete this record?');">
                            <button title="Erase" type="button" id="btn-confirm" class="btn btn-danger btn-sm px-1">
                                <i class="bi bi-trash"></i>
                            </button>
                        </a>
                    </td>
                </tr>
                {% endfor %}

            </tbody>

        </table>





    </div>



</div>


{% endblock %}